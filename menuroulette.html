<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rssearch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="menuroulette.css">
</head>
<body>
<h1>음식은 뽑혔습니다. 원하시면 식당도 뽑을 수 있습니다!</h1>
<h2>(음식이 마음에 안들면 글씨만 바꿔도 되는건 안비밀!)</h2>


        <div class="search-bar input-group mb-3">
            <input id="food" name="q" type="text" class="form-control" placeholder="" aria-label="Recipient's username" aria-describedby="button-addon2">
                <div class="imput-group-append">
                </div>
        </div>
    
    <script>
    var q = location.search.split('=');
    document.querySelector('[type="text"]').value = decodeURI(q[1]);
    </script>

    <div class="rbt">
        <button type="button" id="kakao" class="btn btn-warning">카카오 맵</button>
    </div>

    <div class="list-group">
        <label1 >
            <input id="1" type="checkbox" name="param1" value=""  style="left: -8%;">
            </label1>
            
            <label2>
                <input id="2" type="checkbox" name="param2" value=""  style="left: -8%;">
                </label2>

            <label3>
                <input id="3" type="checkbox" name="param3" value=""  style="left: -8%;">
                </label3>

            <label4>
                <input id="4" type="checkbox" name="param4" value=""  style="left: -8%;">
                </label4>

            <label5>
                <input id="5" type="checkbox" name="param5" value=""  style="left: -8%;">
                </label5>

            <label6>
                <input id="6" type="checkbox" name="param6" value=""  style="left: -8%;">
                </label6>

            <label7>
                <input id="7" type="checkbox" name="param7" value=""  style="left: -8%;">
                </label7>

            <label8>
                <input id="8" type="checkbox" name="param8" value=""  style="left: -8%;">
                </label8>

            <label9>
                <input id="9" type="checkbox" name="param9" value=""  style="left: -8%;">
                </label9>

            <label10>
                <input id="10" type="checkbox" name="param10" value="" style="left: -8%;">
                </label10>

            <label11>
                <input id="11" type="checkbox" name="param11" value="" style="left: -8%;">
                </label11>

            <label12>
                <input id="12" type="checkbox" name="param12" value="" style="left: -8%;">
                </label12>

            <label13>
                <input id="13" type="checkbox" name="param13" value="" style="left: -8%;">
                </label13>

            <label14>
                <input id="14" type="checkbox" name="param14" value="" style="left: -8%;">
                </label14>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
    integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous">
    </script>
<script>
$(document).ready(function () {
    $("#kakao").click(function () {
    $.ajax({
        method: "GET",
        url: "https://dapi.kakao.com/v2/local/search/keyword.json?&radius:2000",
        data: { y: $("#y").text() ,  x: $("#x").text() , query: $("#food").val() , },
        headers: {Authorization: "KakaoAK cc33c94b35ce54d839d4040a322e1aaa"},
    })
        .done(function (msg) {
            console.log(msg);
            $( "label1" ).append("<strong>"+msg.documents[0].place_name+"</strong>" );
            $( "label2" ).append("<strong>"+msg.documents[1].place_name+"</strong>" );
            $( "label3" ).append("<strong>"+msg.documents[2].place_name+"</strong>" );
            $( "label4" ).append("<strong>"+msg.documents[3].place_name+"</strong>" );
            $( "label5" ).append("<strong>"+msg.documents[4].place_name+"</strong>" );
            $( "label6" ).append("<strong>"+msg.documents[5].place_name+"</strong>" );
            $( "label7" ).append("<strong>"+msg.documents[6].place_name+"</strong>" );
            $( "label8" ).append("<strong>"+msg.documents[7].place_name+"</strong>" );
            $( "label9" ).append("<strong>"+msg.documents[8].place_name+"</strong>" );
            $( "label10" ).append("<strong>"+msg.documents[9].place_name+"</strong>" );
            $( "label11" ).append("<strong>"+msg.documents[10].place_name+"</strong>" );
            $( "label12" ).append("<strong>"+msg.documents[11].place_name+"</strong>" );
            $( "label13" ).append("<strong>"+msg.documents[12].place_name+"</strong>" );
            $( "label14" ).append("<strong>"+msg.documents[13].place_name+"</strong>" );
            $("#1").val(msg.documents[0].place_name);
            $("#2").val(msg.documents[1].place_name);
            $("#3").val(msg.documents[2].place_name);
            $("#4").val(msg.documents[3].place_name);
            $("#5").val(msg.documents[4].place_name);
            $("#6").val(msg.documents[5].place_name);
            $("#7").val(msg.documents[6].place_name);
            $("#8").val(msg.documents[7].place_name);
            $("#9").val(msg.documents[8].place_name);
            $("#10").val(msg.documents[9].place_name);
            $("#11").val(msg.documents[10].place_name);
            $("#12").val(msg.documents[11].place_name);
            $("#13").val(msg.documents[12].place_name);
            $("#14").val(msg.documents[13].place_name);
        });
    })
})
</script>
<div id="x" value="x" type="text"><x> </x></div>
<div id="y" value="y" type="text"><y> </y></div>
<script src="https://code.jquery.com/jquery-3.6.0.js"
integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous">
</script>


<script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                console.log(position.coords.latitude);
                console.log(position.coords.longitude);
                $( "y" ).append("<strong>"+position.coords.latitude+"</strong>" );
                $( "x" ).append("<strong>"+position.coords.longitude+"</strong>" );
            }, function(error) {
                console.error(error);
            }, {
                enableHighAccuracy: false,
                maximumAge: 0,
                timeout: Infinity
            });
            } else {
            alert('위치를 찾을 수 없습니다.');
            }
        }
        getLocation();
</script>







<button type="button" id="bt" class="btn btn-danger"> 여기를 누르면 식당을 골라줘요! </button></a>
<script>
    var btn = document.querySelector('[id="bt"]');
    btn.addEventListener('click', function() {
    var checkbox = document.querySelectorAll('[name^="param"]:checked');
    if(!checkbox.length) {
        alert("선택 값이 없습니다!");
        return false;
    }
    var num = Math.floor(Math.random() * checkbox.length);
    location.href = 'Result.html?q=' + checkbox[num].value;
});
</script>

<div><h3>안녕하세요</h3></div>
<div><h4>위치 허용을 하시고 카카오 맵을 눌러 주변식당을 검색하고 뽑을 수도 있습니다! (횟수 제한이 있어 안될경우 하루 또는 한달 후에 기능이 다시 작동됩니다.)</h4></div>
</body>
</html>
